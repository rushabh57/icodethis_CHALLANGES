<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

</head>


<body>
    <div class="sub-popup">
        <div class="popup">
            <img src="https://www.sattvicrecipe.com/wp-content/uploads/2022/10/veg-protein.jpeg" alt="">
            <strong>SUBSCRIBE TODAY</strong>
            <h3>Never miss a recipe</h3>
            <input type="text" placeholder="Your mail" />
            <button id="subBtn">Subscribe</button>
            <p>We won't send you spam. <br> Unsubscribe at any time</p>
        </div>
    </div>
    <div class="search-section">
        <h2>Search for the recipes</h2>
        <div class="serch-input">
            <svg id="svgSrchTran" class="" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path
                        d="M16.6725 16.6412L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z"
                        stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
            </svg>
            <input type="text" id="srch" placeholder="your item.." />
        </div>
    </div>


    <div class="swiper mySwiper slider-cate">

        <div class="swiper-wrapper">
            <div class="swiper-slide item-cate" id="pizza">
                <img src="https://img.freepik.com/free-photo/ai-generated-pasta_23-2150637304.jpg?t=st=1717570706~exp=1717574306~hmac=cce158870875b6f8884542a3fa54f5c354a95ad08bb38d46bae295fb5a853c73&w=360"
                    alt="">
                <p>Pizza </p>
            </div>
            <div class="swiper-slide item-cate" id="pencake">
                <img src="https://images.unsplash.com/photo-1528207776546-365bb710ee93?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                    alt="">
                <p>pencakes </p>
            </div>
            <div class="swiper-slide item-cate" id="salad">
                <img src="https://images.pexels.com/photos/1213710/pexels-photo-1213710.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
                    alt="">
                <p>salad </p>
            </div>
            <div class="swiper-slide" id="dal">
                <img src="https://images.pexels.com/photos/958545/pexels-photo-958545.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
                    alt="">
                <p>Dal </p>
            </div>
            <div class="swiper-slide item-cate" id="noodle">
                <img src="https://images.unsplash.com/photo-1585032226651-759b368d7246?q=80&w=1892&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                    alt="">
                <p>Noodle </p>
            </div>
            <div class="swiper-slide item-cate" id="more">
                <img src="https://images.unsplash.com/photo-1585032226651-759b368d7246?q=80&w=1892&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                    alt="">
                <p>More</p>
            </div>

        </div>
        <div class="swiper-button-next">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <rect width="24" height="24" fill=""></rect>
                    <path d="M9.5 7L14.5 12L9.5 17" stroke="rgba(var(--primaryColor))" stroke-linecap="round"
                        stroke-linejoin="round">
                    </path>
                </g>
            </svg>
        </div>
        <div class="swiper-button-prev">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <rect width="24" height="24" fill=""></rect>
                    <path d="M14.5 17L9.5 12L14.5 7" stroke="rgba(var(--primaryColor))" stroke-linecap="round"
                        stroke-linejoin="round">
                    </path>
                </g>
            </svg>
        </div>
    </div>
    <div class="filter">
        <div>
            <h1>Difficulty</h1>
            <div class="btn-grp">
                <button>Easy</button>
                <button class="active">Medium</button>
                <button>Hard</button>
            </div>
        </div>
        <div>
            <div class="btn-grp flex">
                <button class="active"><img src="https://www.svgrepo.com/show/523301/clock-circle.svg" alt="">
                    <p>30 min</p>
                </button>
                <button>
                    <img src="https://www.svgrepo.com/show/523599/pie-chart-2.svg" alt="">
                    <p>6 serving</p>
                </button>
                <button>
                    <img src="https://www.svgrepo.com/show/522733/align-bottom.svg" alt="">
                    <p>210 cals</p>
                </button>
            </div>
        </div>
    </div>
    <div class="card-container" id="card-container">

    </div>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
        var swiper = new Swiper(".mySwiper", {
            slidesPerView: 'auto',
            spaceBetween: 30,


            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
        });


        let delay = 50;


        const srch = document.getElementById('srch');
        let svgSrchTran = document.querySelector('#svgSrchTran path');
        let svgSrch = document.querySelector('#svgSrchTran');

        let arrow = 'M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8';
        let ogSearchPath = 'M16.6725 16.6412L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z';

        srch.addEventListener('input', () => {
            if (srch.value.trim() !== "") {
                svgSrchTran.setAttribute('d', arrow);
                svgSrch.classList.add('aniTranRev');
                svgSrch.classList.remove('aniTran');
            } else {
                svgSrchTran.setAttribute('d', ogSearchPath);
                svgSrch.classList.remove('aniTranRev');
                svgSrch.classList.add('aniTran');
            }
        });

        svgSrch.addEventListener('click', () => {
            recipes();
        });

        async function recipes() {
            const srchValue = srch.value;
            const response = await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${srchValue}`);
            const recipe = await response.json();
            let items = recipe.meals;

            // console.log(items);

            function generateCard(item) {
                let animationDelay = delay += 50;
                let randomInt = Math.floor(Math.random() * 100) + 1;


                return `
    <div class="card" style='animation-delay:${animationDelay}ms'>
        <div class="sideImg">
        <img src='${item.strMealThumb}' alt=''/>    
        </div>
        <div class="detail">
            <div class="upper">
                <h1>${item.strMeal}</h1>
                <svg class='heart' viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path d="M15.7 4C18.87 4 21 6.98 21 9.76C21 15.39 12.16 20 12 20C11.84 20 3 15.39 3 9.76C3 6.98 5.13 4 8.3 4C10.12 4 11.31 4.91 12 5.71C12.69 4.91 13.88 4 15.7 4Z" stroke="" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                </svg>
            </div>
            <p>${item.strInstructions}</p>
            <div class="rating">
<img src='https://www.svgrepo.com/show/525539/star.svg' />    
<img src='https://www.svgrepo.com/show/525539/star.svg' />    
<img src='https://www.svgrepo.com/show/525539/star.svg' />    
<img src='https://www.svgrepo.com/show/525539/star.svg' />    
<img src='https://www.svgrepo.com/show/525539/star.svg' />    
<p>${randomInt}K</p>
                </div>
            </div>
        </div>
    </div>`;


            }

            const cardContainer = document.getElementById('card-container');
            let cardHTML = '';

            if (items) {
                // Limit the number of items to 5 (or fewer if less than 5 items are available)
                const limitedItems = items.slice(0, 5);
                limitedItems.forEach(item => {
                    cardHTML += generateCard(item);
                });


            } else {
                cardHTML = `<p id='notFoundItem'>No results found. <span> ${srchValue} </span></p>`;
            }

            cardContainer.innerHTML = cardHTML;

            let isClick = false;

            let heartIcons = document.querySelectorAll('.heart');
            heartIcons.forEach(icon => {
                icon.addEventListener('click', () => {
                    if (!isClick) {
                        icon.classList.add('toggle');
                        isClick = true;
                    } else {
                        icon.classList.remove('toggle');
                        isClick = false;
                    }
                });
            });

        }

        const subPopup = document.querySelector('.sub-popup');
        const subBtn = document.querySelector('#subBtn');
        setTimeout(() => {
            subPopup.style.zIndex = '100';
            subPopup.style.opacity = '1';
        }, 2500);
        subBtn.addEventListener('click', () => {
            subPopup.style.zIndex = '-1';
            subPopup.style.opacity = '0';

        })
    </script>
</body>

</html>